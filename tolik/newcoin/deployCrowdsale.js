var fs = require('fs');
var erisC = require('eris-contracts');

var erisdbURL = "http://localhost:1337/rpc";

var idisAbi = JSON.parse(fs.readFileSync("../crowdsale/abi/Crowdsale.abi", 'utf8'));

var accountData = require('./accounts.json');

var contractsManager = erisC.newContractManagerDev(erisdbURL, accountData.simplechain_full_000);

var compiled = "60606040526000600960006101000a81548160ff02191690837f01000000000000000000000000000000000000000000000000000000000000009081020402179055506000600960016101000a81548160ff02191690837f0100000000000000000000000000000000000000000000000000000000000000908102040217905550604051608080611500833981016040528080519060200190919080519060200190919080519060200190919080519060200190919050505b33600160006101000a81548173ffffffffffffffffffffffffffffffffffffffff02191690836c0100000000000000000000000090810204021790555083600060006101000a81548173ffffffffffffffffffffffffffffffffffffffff02191690836c0100000000000000000000000090810204021790555082600260005081905550603c8202420160046000508190555080600560006101000a81548160ff02191690837f01000000000000000000000000000000000000000000000000000000000000009081020402179055505b505050506113658061019b6000396000f3606060405236156100d7576000357c01000000000000000000000000000000000000000000000000000000009004806301cb3b20146100dc57806302d05d3f1461010657806329dcb0cf1461014457806338af3eed1461016c5780633962f82d146101aa578063625adaf2146101d25780637a2d5add1461023e5780637a3a0e84146102715780637b3e5e7b146102995780638f4ffcb1146102c1578063a0e2e5f61461034d578063c5064cb01461037e578063e4e0ef35146103a8578063f7888aec146103ef578063fd6b7ef814610429576100d7565b610002565b34610002576100ee6004805050610453565b60405180821515815260200191505060405180910390f35b346100025761011860048050506105b0565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b346100025761015660048050506105d6565b6040518082815260200191505060405180910390f35b346100025761017e60048050506105df565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34610002576101bc6004805050610605565b6040518082815260200191505060405180910390f35b34610002576102286004808035906020019082018035906020019191908080602002602001604051908101604052809392919081815260200183836020028082843782019150505050505090909190505061061a565b6040518082815260200191505060405180910390f35b346100025761025960048080359060200190919050506107ef565b60405180821515815260200191505060405180910390f35b346100025761028360048050506108ba565b6040518082815260200191505060405180910390f35b34610002576102ab60048050506108c3565b6040518082815260200191505060405180910390f35b34610002576103356004808035906020019091908035906020019091908035906020019091908035906020019082018035906020019191908080601f0160208091040260200160405190810160405280939291908181526020018383808284378201915050505050509090919050506108cc565b60405180821515815260200191505060405180910390f35b34610002576103686004808035906020019091905050610bc2565b6040518082815260200191505060405180910390f35b34610002576103906004805050610bdd565b60405180821515815260200191505060405180910390f35b34610002576103c36004808035906020019091905050610bf0565b604051808273ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390f35b34610002576104136004808035906020019091908035906020019091905050610c32565b6040518082815260200191505060405180910390f35b346100025761043b6004805050610c5d565b60405180821515815260200191505060405180910390f35b6000600460005054421015806104755750600560009054906101000a900460ff165b1561059657600260005054600360005054101515610548576001600960006101000a81548160ff02191690837f01000000000000000000000000000000000000000000000000000000000000009081020402179055507fec3f991caf7857d61663fd1bba1739e04abd4781238508cde554bb849d790c85600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600360005054604051808373ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019250505060405180910390a15b60046000505442101515610595576001600960016101000a81548160ff02191690837f01000000000000000000000000000000000000000000000000000000000000009081020402179055505b5b600960019054906101000a900460ff1690506105ad565b90565b600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60046000505481565b600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b60006006600050805490509050610617565b90565b600060006000600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff16141580156106cc5750600160009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff163373ffffffffffffffffffffffffffffffffffffffff1614155b156106d657610002565b600091505b83518210156107e05783828151811015610002579060200190602002015190506006600050805480600101828181548183558181151161074d5781836000526020600020918201910161074c919061072e565b80821115610748576000818150600090555060010161072e565b5090565b5b5050509190906000526020600020900160005b83909190916101000a81548173ffffffffffffffffffffffffffffffffffffffff02191690836c01000000000000000000000000908102040217905550506000600860005060008373ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000508190555081806001019250506106db565b8192506107e8565b5050919050565b60006000600960019054906101000a900460ff161561081157600091506108b4565b600090505b6006600050805490508110156108ab57600660005081815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff16141561089e57600191506108b4565b8080600101915050610816565b600091506108b4565b50919050565b60026000505481565b60036000505481565b600060006108d9846107ef565b15156108e85760009150610bb9565b3090508373ffffffffffffffffffffffffffffffffffffffff166323b872dd878388600060405160200152604051847c0100000000000000000000000000000000000000000000000000000000028152600401808473ffffffffffffffffffffffffffffffffffffffff1681526020018373ffffffffffffffffffffffffffffffffffffffff1681526020018281526020019350505050602060405180830381600087803b156100025760325a03f115610002575050506040518051906020015015156109b85760009150610bb9565b6000600760005060008873ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008673ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600050541415610a7d5784600760005060008873ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008673ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005081905550610ae4565b84600760005060008873ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828282505401925050819055505b84600860005060008673ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000828282505401925050819055508460036000828282505401925050819055507f1fe43a085f5507370c77d08b78179e99076ad281426b5189351310be1b72625c8685876001604051808573ffffffffffffffffffffffffffffffffffffffff1681526020018473ffffffffffffffffffffffffffffffffffffffff168152602001838152602001821515815260200194505050505060405180910390a160019150610bb9565b50949350505050565b60086000506020528060005260406000206000915090505481565b600560009054906101000a900460ff1681565b600660005081815481101561000257906000526020600020900160005b9150909054906101000a900473ffffffffffffffffffffffffffffffffffffffff1681565b6007600050602052816000526040600020600050602052806000526040600020600091509150505481565b60006000600060006000610c6f610453565b1515610c7e576000945061135e565b600960009054906101000a900460ff161515610fec576000935083505b600660005080549050841015610fe357600660005084815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1692508250600073ffffffffffffffffffffffffffffffffffffffff168373ffffffffffffffffffffffffffffffffffffffff1614158015610d8257506000600760005060003373ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008573ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000505414155b15610fd657600760005060003373ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008473ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005054915081506000600760005060003373ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008573ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600050819055506000821115610fd5578273ffffffffffffffffffffffffffffffffffffffff1663a9059cbb3384600060405160200152604051837c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b156100025760325a03f115610002575050506040518051906020015015610f75577f1fe43a085f5507370c77d08b78179e99076ad281426b5189351310be1b72625c3384846000604051808573ffffffffffffffffffffffffffffffffffffffff1681526020018473ffffffffffffffffffffffffffffffffffffffff168152602001838152602001821515815260200194505050505060405180910390a1610fd4565b81600760005060003373ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005060008573ffffffffffffffffffffffffffffffffffffffff168152602001908152602001600020600050819055505b5b5b8380600101945050610c9b565b6001945061135e565b600960009054906101000a900460ff16801561105557503373ffffffffffffffffffffffffffffffffffffffff16600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16145b1561135557600190506000935083505b60066000508054905084101561134c57600073ffffffffffffffffffffffffffffffffffffffff16600660005085815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff1614151561133f57600660005084815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff1692508250600860005060008473ffffffffffffffffffffffffffffffffffffffff16815260200190815260200160002060005054915081508273ffffffffffffffffffffffffffffffffffffffff1663a9059cbb600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff1684600060405160200152604051837c0100000000000000000000000000000000000000000000000000000000028152600401808373ffffffffffffffffffffffffffffffffffffffff16815260200182815260200192505050602060405180830381600087803b156100025760325a03f115610002575050506040518051906020015015611339577f1fe43a085f5507370c77d08b78179e99076ad281426b5189351310be1b72625c600060009054906101000a900473ffffffffffffffffffffffffffffffffffffffff16600660005086815481101561000257906000526020600020900160005b9054906101000a900473ffffffffffffffffffffffffffffffffffffffff166003600050546000604051808573ffffffffffffffffffffffffffffffffffffffff1681526020018473ffffffffffffffffffffffffffffffffffffffff168152602001838152602001821515815260200194505050505060405180910390a1600860005060008473ffffffffffffffffffffffffffffffffffffffff1681526020019081526020016000206000506000905561133e565b610002565b5b8380600101945050611065565b6001945061135e565b6000945061135e565b505050509056";

var myNewContract;


contractsManager.newContractFactory(idisAbi).new(
    "2D399D48D853F2B5D9AE34D0CC3DDF53C707CB8B",
    1000,
    10,
    true,
    {data: compiled}, 
	function(error, contract){
    if (error) {
        // Something.
        console.log(error);
        throw error;
    }
    myNewContract = contract;
    console.log(myNewContract);
});
